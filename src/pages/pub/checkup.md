---
layout: '#layout/Publication.astro'
---
# Бэк для чекапа

## БД
### Заявка
- автор
- тексты
- id картинок
- статус

### Картинка
- id
- ссылка на картинку в cld
- статус: грузится | сохранено локально | сохранено в клаудинари | ошибка сохранения локально | ошибка сохранения в клаудинари

## Эндпоинты

### Черновик
- сохранить в бд состояние формы

### Сабмит
- обновить у записи все поля на то, что только что пришло с сервера
- поставить флаг "засабмичено"

### Загрузка картинки
- создать запись в бд
- создать временный файл, использовать в качестве имени id из бд с префиксом
- вернуть на страницу id
- загрузить файл как и сейчас они грузятся
- поставить статус "сохранено локально"
- отдать ответ что успешно сохранено
- запустить в бэкграунде загрузку картинки в клаудинари
- после того как загрузилось в клаудинари, обновить статус в бд

## Изменение поведения

